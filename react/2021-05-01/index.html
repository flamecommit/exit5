<!doctype html>
<html data-n-head-ssr lang="ko" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22ko%22%7D%7D">
  <head>
    <title>SIMPLIZM</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" name="description" content=""><meta data-n-head="ssr" name="keyword" content="프론트엔드, 프론트엔드개발자, 웹퍼블리셔, SIMPLIZM, 심플리즘"><meta data-n-head="ssr" name="format-detection" content="telephone=no"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="preload" href="/_nuxt/4dc5d53.js" as="script"><link rel="preload" href="/_nuxt/b13de4e.js" as="script"><link rel="preload" href="/_nuxt/1f2442e.js" as="script"><link rel="preload" href="/_nuxt/66fd9d3.js" as="script"><link rel="preload" href="/_nuxt/6c91a59.js" as="script"><style data-vue-ssr-id="a74b3f6e:0 a74b3f6e:1 a74b3f6e:2 45aab620:0 517a8dd7:0 fa7ff0ca:0 42fac67b:0 379cf005:0 28c44c98:0 8332076c:0 2b2e1b38:0">@import url(https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap);@import url(https://fonts.googleapis.com/icon?family=Material+Icons);::-moz-selection{background:#fff;color:#000}::selection{background:#fff;color:#000}*,:after,:before{box-sizing:border-box;margin:0;padding:0;font-family:inherit;line-height:inherit;color:inherit;vertical-align:top;text-underline-position:under}body{font-family:"Noto Sans KR",sans-serif;font-weight:400;font-size:16px;color:#000}ol,ul{list-style:none}table{width:100%;border-spacing:0;table-layout:fixed}td,th{text-align:center;vertical-align:middle}a{text-decoration:none}button,input[type=button],input[type=file],input[type=image],input[type=reset],input[type=submit]{border:none;border-radius:0;background:0 0;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer}input:not([type]),input[type=date],input[type=datetime-local],input[type=email],input[type=month],input[type=number],input[type=password],input[type=search],input[type=tel],input[type=text],input[type=time],input[type=url],input[type=week],select,textarea{display:inline-block;width:100%;height:40px;font-size:16px;line-height:38px;color:#000;padding:0 10px;border:1px solid #ccc;background:#fff;box-shadow:none}input:not([type]):disabled,input[type=date]:disabled,input[type=datetime-local]:disabled,input[type=email]:disabled,input[type=month]:disabled,input[type=number]:disabled,input[type=password]:disabled,input[type=search]:disabled,input[type=tel]:disabled,input[type=text]:disabled,input[type=time]:disabled,input[type=url]:disabled,input[type=week]:disabled,select:disabled,textarea:disabled{background:#f7f7f7}input:not([type])::-moz-placeholder,input[type=date]::-moz-placeholder,input[type=datetime-local]::-moz-placeholder,input[type=email]::-moz-placeholder,input[type=month]::-moz-placeholder,input[type=number]::-moz-placeholder,input[type=password]::-moz-placeholder,input[type=search]::-moz-placeholder,input[type=tel]::-moz-placeholder,input[type=text]::-moz-placeholder,input[type=time]::-moz-placeholder,input[type=url]::-moz-placeholder,input[type=week]::-moz-placeholder,select::-moz-placeholder,textarea::-moz-placeholder{color:#999}input:not([type]):-ms-input-placeholder,input[type=date]:-ms-input-placeholder,input[type=datetime-local]:-ms-input-placeholder,input[type=email]:-ms-input-placeholder,input[type=month]:-ms-input-placeholder,input[type=number]:-ms-input-placeholder,input[type=password]:-ms-input-placeholder,input[type=search]:-ms-input-placeholder,input[type=tel]:-ms-input-placeholder,input[type=text]:-ms-input-placeholder,input[type=time]:-ms-input-placeholder,input[type=url]:-ms-input-placeholder,input[type=week]:-ms-input-placeholder,select:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#999}input:not([type])::placeholder,input[type=date]::placeholder,input[type=datetime-local]::placeholder,input[type=email]::placeholder,input[type=month]::placeholder,input[type=number]::placeholder,input[type=password]::placeholder,input[type=search]::placeholder,input[type=tel]::placeholder,input[type=text]::placeholder,input[type=time]::placeholder,input[type=url]::placeholder,input[type=week]::placeholder,select::placeholder,textarea::placeholder{color:#999}textarea{height:300px;padding:10px;line-height:1.5}input[type=number] ::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none}.hljs{display:block;overflow-x:auto;padding:.5em;background:#282b2e}.hljs-keyword,.hljs-literal,.hljs-selector-id,.hljs-selector-tag{color:#93c763}.hljs-number{color:#ffcd22}.hljs{color:#e0e2e4}.hljs-attribute{color:#668bb0}.hljs-class .hljs-title,.hljs-code,.hljs-section{color:#fff}.hljs-link,.hljs-regexp{color:#d39745}.hljs-meta{color:#557182}.hljs-addition,.hljs-built_in,.hljs-bullet,.hljs-emphasis,.hljs-name,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-subst,.hljs-tag,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable{color:#8cbbad}.hljs-string,.hljs-symbol{color:#ec7600}.hljs-comment,.hljs-deletion,.hljs-quote{color:#818e96}.hljs-selector-class{color:#a082bd}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-strong,.hljs-title,.hljs-type{font-weight:700}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#f3b605;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}#wrap[data-v-2a7b6aa2]{position:relative;min-width:320px;min-height:100vh;padding:0 0 0 240px;background:#000;color:#fff}@media screen and (max-width:1200px){#wrap[data-v-2a7b6aa2]{padding:50px 0 0}}.aside_navi[data-v-03511f41]{position:fixed;top:0;left:0;width:240px;min-height:100%;background:#2c343e;padding:50px 12px}.aside_navi .logo[data-v-03511f41]{margin-bottom:30px;padding:0 12px;text-align:center}.aside_navi .logo a[data-v-03511f41]{display:block;font-weight:700;font-size:32px}.aside_navi .btn_menu[data-v-03511f41]{display:none}.aside_navi .gnb[data-v-03511f41]{padding:20px}.aside_navi .gnb>ul>li>a[data-v-03511f41]{display:block;padding:8px 20px;font-size:17px;color:#999}.aside_navi .gnb>ul>li>a[data-v-03511f41]:hover{text-decoration:underline}.aside_navi .gnb>ul>li>ul>li>a[data-v-03511f41]{display:block;padding:4px 32px;font-size:13px;color:#999}.aside_navi .gnb>ul>li>ul>li>a[data-v-03511f41]:hover{text-decoration:underline}.aside_navi .gnb>ul>li.on>a[data-v-03511f41],.aside_navi .gnb>ul>li>ul>li.on>a[data-v-03511f41]{color:#fff}@media screen and (max-width:1200px){.aside_navi[data-v-03511f41]{display:flex;justify-content:space-between;align-items:center;width:100%;min-height:0;height:50px;padding:0 20px;z-index:100}.aside_navi .logo[data-v-03511f41]{margin-bottom:0;padding:0}.aside_navi .logo a[data-v-03511f41]{font-size:20px}.aside_navi .btn_menu[data-v-03511f41]{display:block;position:relative;width:22px;height:24px;z-index:101}.aside_navi .btn_menu[data-v-03511f41]:before{content:"";top:2px}.aside_navi .btn_menu span[data-v-03511f41],.aside_navi .btn_menu[data-v-03511f41]:before{display:block;position:absolute;left:0;width:100%;height:3px;background:#fff;transition:all .3s}.aside_navi .btn_menu span[data-v-03511f41]{text-indent:-9999em;top:10px}.aside_navi .btn_menu[data-v-03511f41]:after{display:block;content:"";position:absolute;top:18px;left:0;width:100%;height:3px;background:#fff;transition:all .3s}.aside_navi .gnb[data-v-03511f41]{overflow:hidden;display:flex;position:fixed;top:0;right:0;left:0;height:0;padding:0;opacity:0;z-index:100;justify-content:center;align-items:center;text-align:center;background:rgba(0,0,0,.9)}.aside_navi .gnb>ul>li>a[data-v-03511f41]{font-size:32px}.aside_navi .gnb>ul>li>ul>li>a[data-v-03511f41]{font-size:20px}.aside_navi.open .btn_menu[data-v-03511f41]:before{top:7px;transform:rotate(45deg)}.aside_navi.open .btn_menu span[data-v-03511f41]{opacity:0}.aside_navi.open .btn_menu[data-v-03511f41]:after{top:7px;transform:rotate(-45deg)}.aside_navi.open .gnb[data-v-03511f41]{height:100vh;opacity:1;transition:opacity .3s}}.article_wrap[data-v-1d9d1214]{padding:50px 50px 100px;max-width:1000px}@media screen and (max-width:1200px){.article_wrap[data-v-1d9d1214]{padding:50px 20px}}.article-head[data-v-a498b346]{padding:0 0 30px;margin-bottom:50px;border-bottom:2px solid #ddd}.article-head h1[data-v-a498b346]{margin-bottom:30px;font-weight:700;font-size:32px}.article-head .info[data-v-a498b346]{display:flex;font-size:12px}.article-head .info .writer[data-v-a498b346]{margin-left:15px}.article-body{font-size:14px;line-height:1.8}.article-body p{margin:1.2em 0}.article-body a{color:#4fb9fe}.article-body a:hover{text-decoration:underline}.article-body h2{margin:3em 0 1em;font-weight:700;font-size:22px}.article-body h2+p{margin-top:0}.article-body h3{margin:1.2em 0;font-weight:700;font-size:16px}.article-body h3+p{margin-top:0}.article-body .terminal{display:inline-block;background:#222;margin:0 3px;padding:0 5px;border-radius:3px;color:#e4aa68}.article-body pre{margin:1.8em 0}.article-body pre .language-css .token.string,.article-body pre .style .token.string,.article-body pre .token.entity,.article-body pre .token.operator,.article-body pre .token.url{background:0 0}.article-body p{white-space:pre-wrap}.article-body li,.article-body p{word-break:keep-all}.article-body ul{margin-left:1.8em;margin-top:1.8em;margin-bottom:1.8em}.article-body ul li{list-style:circle}.article-body ul li:not(:first-child){margin-top:.2em}.article-body ol{margin-left:1.8em;margin-top:1.8em;margin-bottom:1.8em}.article-body ol li{list-style:decimal}.article-body ol li:not(:first-child){margin-top:.2em}.article-body blockquote{background:#1e1e1e;padding:1em;font-family:"Nanum Myeongjo";font-size:1em}.article-body blockquote p{margin:0;padding:.5em 1em;border-left:3px solid #fff}.nuxt-content-highlight{position:relative}.nuxt-content-highlight>.filename{position:absolute;top:5px;right:10px;color:#a8b4c2}:not(pre)>code{padding:.1em .3em;border-radius:.3em;color:#db4c69;background:#222}code[class*=language-],pre[class*=language-]{color:#d4d4d4;font-size:14px;text-shadow:none;font-family:Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#75a7ca}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#75a7ca}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:1.8em 0;overflow:auto;background:#1e1e1e}.namespace{opacity:.7}.token.doctype .token.doctype-tag{color:#569cd6}.token.doctype .token.name{color:#9cdcfe}.token.comment,.token.prolog{color:#6a9955}.language-html .language-css .token.punctuation,.language-html .language-javascript .token.punctuation,.token.punctuation{color:#d4d4d4}.token.boolean,.token.constant,.token.inserted,.token.number,.token.property,.token.symbol,.token.tag,.token.unit{color:#b5cea8}.token.attr-name,.token.builtin,.token.char,.token.deleted,.token.selector,.token.string{color:#ce9178}.language-css .token.string.url{text-decoration:underline}.token.entity,.token.operator{color:#d4d4d4}.token.operator.arrow{color:#569cd6}.token.atrule{color:#ce9178}.token.atrule .token.rule{color:#c586c0}.token.atrule .token.url{color:#9cdcfe}.token.atrule .token.url .token.function{color:#dcdcaa}.token.atrule .token.url .token.punctuation{color:#d4d4d4}.token.keyword{color:#569cd6}.token.keyword.control-flow,.token.keyword.module{color:#c586c0}.token.function,.token.function .token.maybe-class-name{color:#dcdcaa}.token.regex{color:#d16969}.token.important{color:#569cd6}.token.italic{font-style:italic}.token.constant{color:#9cdcfe}.token.class-name,.token.maybe-class-name{color:#4ec9b0}.token.console,.token.interpolation,.token.parameter{color:#9cdcfe}.token.boolean,.token.punctuation.interpolation-punctuation{color:#569cd6}.token.exports .token.maybe-class-name,.token.imports .token.maybe-class-name,.token.property,.token.variable{color:#9cdcfe}.token.escape,.token.selector{color:#d7ba7d}.token.tag{color:#569cd6}.token.cdata,.token.tag .token.punctuation{color:grey}.token.attr-name{color:#9cdcfe}.token.attr-value,.token.attr-value .token.punctuation{color:#ce9178}.token.attr-value .token.punctuation.attr-equals{color:#d4d4d4}.token.entity{color:#569cd6}.token.namespace{color:#4ec9b0}.token.script,code[class*=language-javascript],code[class*=language-jsx],code[class*=language-tsx],code[class*=language-typescript],pre[class*=language-javascript],pre[class*=language-jsx],pre[class*=language-tsx],pre[class*=language-typescript]{color:#9cdcfe}code[class*=language-css],pre[class*=language-css]{color:#ce9178}code[class*=language-html],pre[class*=language-html]{color:#d4d4d4}.language-regex .token.anchor{color:#dcdcaa}.language-html .token.punctuation{color:grey}pre[data-line]{position:relative}pre[class*=language-]>code[class*=language-]{position:relative;z-index:1}.line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:#f7ebc6;box-shadow:inset 5px 0 0 #f7d87c;z-index:0;pointer-events:none;line-height:inherit;white-space:pre}table{border-collapse:collapse;margin:1.8em 0}table thead tr th{border:1px solid #eee;background:#222;padding:3px}table tbody tr th{background:#f7f7f7;padding:3px}table tbody tr td{border:1px solid #eee;padding:3px}</style><link rel="preload" href="/_nuxt/static/1650435490/react/2021-05-01/state.js" as="script"><link rel="preload" href="/_nuxt/static/1650435490/react/2021-05-01/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1650435490/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div id="wrap" data-v-2a7b6aa2><div data-fetch-key="data-v-03511f41:0" class="aside_navi" data-v-03511f41 data-v-2a7b6aa2><h1 class="logo" data-v-03511f41><a href="/" class="nuxt-link-active" data-v-03511f41>SIMPLIZM</a></h1> <button type="button" class="btn_menu" data-v-03511f41><span data-v-03511f41>메뉴열기</span></button> <nav class="gnb" data-v-03511f41><ul data-v-03511f41><li data-v-03511f41><a href="/javascript" data-v-03511f41>javascript</a></li><li class="on" data-v-03511f41><a href="/react" class="nuxt-link-active" data-v-03511f41>react</a></li><li data-v-03511f41><a href="/vue" data-v-03511f41>vue</a></li></ul></nav></div> <div id="container" data-v-2a7b6aa2><div class="article_wrap" data-v-1d9d1214 data-v-2a7b6aa2><section class="article-head" data-v-a498b346 data-v-1d9d1214><h1 data-v-a498b346 data-v-1d9d1214>[React] Effect Hook 사용하기2</h1> <div class="info" data-v-a498b346 data-v-1d9d1214><div class="date" data-v-a498b346 data-v-1d9d1214>작성일 : 2021-05-01</div> <div class="writer" data-v-a498b346 data-v-1d9d1214>작성자 : 신용준</div></div></section> <section class="article-body" data-v-1d9d1214><div class="nuxt-content" data-v-1d9d1214><h2 id="effect를-이용하는-팁" data-v-1d9d1214><a href="#effect%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%98%EB%8A%94-%ED%8C%81" aria-hidden="true" tabindex="-1" data-v-1d9d1214><span class="icon icon-link" data-v-1d9d1214></span></a>Effect를 이용하는 팁</h2>
<p data-v-1d9d1214>이제 숙련된 리액트 사용자들이라면 보다 궁금해할 useEffect에 대해 좀 더 깊이 알아보겠습니다.</p>
<h3 id="관심사를-구분하려고-한다면-multiple-effect를-사용합니다" data-v-1d9d1214><a href="#%EA%B4%80%EC%8B%AC%EC%82%AC%EB%A5%BC-%EA%B5%AC%EB%B6%84%ED%95%98%EB%A0%A4%EA%B3%A0-%ED%95%9C%EB%8B%A4%EB%A9%B4-multiple-effect%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%A9%EB%8B%88%EB%8B%A4" aria-hidden="true" tabindex="-1" data-v-1d9d1214><span class="icon icon-link" data-v-1d9d1214></span></a>관심사를 구분하려고 한다면 Multiple Effect를 사용합니다</h3>
<p data-v-1d9d1214>Hook이 탄생한 동기가 된 문제 중의 하나가 생명주기 class 메서드가 관련이 없는 로직들은 모아놓고, 관련이 있는 로직들은 여러 개의 메서드에 나누어 놓은 경우가 자주 있다는 것입니다. 이전의 예시에서도 보았던 카운터와 친구의 상태 지표 로직을 결합한 컴포넌트를 보겠습니다.</p>
<div class="nuxt-content-highlight" data-v-1d9d1214><pre class="language-js line-numbers" data-v-1d9d1214><code data-v-1d9d1214><span class="token keyword" data-v-1d9d1214>class</span> <span class="token class-name" data-v-1d9d1214>FriendStatusWithCounter</span> <span class="token keyword" data-v-1d9d1214>extends</span> <span class="token class-name" data-v-1d9d1214>React<span class="token punctuation" data-v-1d9d1214>.</span>Component</span> <span class="token punctuation" data-v-1d9d1214>{</span>
  <span class="token function" data-v-1d9d1214>constructor</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token parameter" data-v-1d9d1214>props</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token punctuation" data-v-1d9d1214>{</span>
    <span class="token keyword" data-v-1d9d1214>super</span><span class="token punctuation" data-v-1d9d1214>(</span>props<span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>
    <span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>state</span> <span class="token operator" data-v-1d9d1214>=</span> <span class="token punctuation" data-v-1d9d1214>{</span> count<span class="token operator" data-v-1d9d1214>:</span> <span class="token number" data-v-1d9d1214>0</span><span class="token punctuation" data-v-1d9d1214>,</span> isOnline<span class="token operator" data-v-1d9d1214>:</span> <span class="token keyword null nil" data-v-1d9d1214>null</span> <span class="token punctuation" data-v-1d9d1214>}</span><span class="token punctuation" data-v-1d9d1214>;</span>
    <span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>handleStatusChange</span> <span class="token operator" data-v-1d9d1214>=</span> <span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>handleStatusChange</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>bind</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>
  <span class="token punctuation" data-v-1d9d1214>}</span>

  <span class="token function" data-v-1d9d1214>componentDidMount</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token punctuation" data-v-1d9d1214>{</span>
    <span class="token dom variable" data-v-1d9d1214>document</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>title</span> <span class="token operator" data-v-1d9d1214>=</span> <span class="token template-string" data-v-1d9d1214><span class="token template-punctuation string" data-v-1d9d1214>`</span><span class="token string" data-v-1d9d1214>You clicked </span><span class="token interpolation" data-v-1d9d1214><span class="token interpolation-punctuation punctuation" data-v-1d9d1214>${</span><span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>state</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>count</span><span class="token interpolation-punctuation punctuation" data-v-1d9d1214>}</span></span><span class="token string" data-v-1d9d1214> times</span><span class="token template-punctuation string" data-v-1d9d1214>`</span></span><span class="token punctuation" data-v-1d9d1214>;</span>
    <span class="token maybe-class-name" data-v-1d9d1214>ChatAPI</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>subscribeToFriendStatus</span><span class="token punctuation" data-v-1d9d1214>(</span>
      <span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>props</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>friend</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>id</span><span class="token punctuation" data-v-1d9d1214>,</span>
      <span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>handleStatusChange</span>
    <span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>
  <span class="token punctuation" data-v-1d9d1214>}</span>

  <span class="token function" data-v-1d9d1214>componentDidUpdate</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token punctuation" data-v-1d9d1214>{</span>
    <span class="token dom variable" data-v-1d9d1214>document</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>title</span> <span class="token operator" data-v-1d9d1214>=</span> <span class="token template-string" data-v-1d9d1214><span class="token template-punctuation string" data-v-1d9d1214>`</span><span class="token string" data-v-1d9d1214>You clicked </span><span class="token interpolation" data-v-1d9d1214><span class="token interpolation-punctuation punctuation" data-v-1d9d1214>${</span><span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>state</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>count</span><span class="token interpolation-punctuation punctuation" data-v-1d9d1214>}</span></span><span class="token string" data-v-1d9d1214> times</span><span class="token template-punctuation string" data-v-1d9d1214>`</span></span><span class="token punctuation" data-v-1d9d1214>;</span>
  <span class="token punctuation" data-v-1d9d1214>}</span>

  <span class="token function" data-v-1d9d1214>componentWillUnmount</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token punctuation" data-v-1d9d1214>{</span>
    <span class="token maybe-class-name" data-v-1d9d1214>ChatAPI</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>unsubscribeFromFriendStatus</span><span class="token punctuation" data-v-1d9d1214>(</span>
      <span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>props</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>friend</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>id</span><span class="token punctuation" data-v-1d9d1214>,</span>
      <span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>handleStatusChange</span>
    <span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>
  <span class="token punctuation" data-v-1d9d1214>}</span>

  <span class="token function" data-v-1d9d1214>handleStatusChange</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token parameter" data-v-1d9d1214>status</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token punctuation" data-v-1d9d1214>{</span>
    <span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>setState</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token punctuation" data-v-1d9d1214>{</span>
      isOnline<span class="token operator" data-v-1d9d1214>:</span> status<span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>isOnline</span>
    <span class="token punctuation" data-v-1d9d1214>}</span><span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>
  <span class="token punctuation" data-v-1d9d1214>}</span>
  <span class="token comment" data-v-1d9d1214>// ...</span>
</code></pre></div>
<p data-v-1d9d1214>document.title을 설정하는 로직이 componentDidMount와 componentDidUpdate에 나누어져 있습니다. 구독(subscription)로직 또한 componentDidMount와 componentWillUnmount에 나누어져 있네요. componentDidMount가 두 가지의 작업을 위한 코드를 모두 가지고 있습니다.</p>
<p data-v-1d9d1214>Hook을 이용하여 이 문제를 어떻게 해결할 수 있을까요? State Hook을 여러 번 사용할 수 있는것처럼 effect 또한 여러 번 사용할 수 있습니다. Effect를 이용하여 서로 관련이 없는 로직들을 갈라놓을 수 있습니다.</p>
<div class="nuxt-content-highlight" data-v-1d9d1214><pre class="language-js line-numbers" data-v-1d9d1214><code data-v-1d9d1214><span class="token keyword" data-v-1d9d1214>function</span> <span class="token function" data-v-1d9d1214><span class="token maybe-class-name" data-v-1d9d1214>FriendStatusWithCounter</span></span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token parameter" data-v-1d9d1214>props</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token punctuation" data-v-1d9d1214>{</span>
  <span class="token keyword" data-v-1d9d1214>const</span> <span class="token punctuation" data-v-1d9d1214>[</span>count<span class="token punctuation" data-v-1d9d1214>,</span> setCount<span class="token punctuation" data-v-1d9d1214>]</span> <span class="token operator" data-v-1d9d1214>=</span> <span class="token function" data-v-1d9d1214>useState</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token number" data-v-1d9d1214>0</span><span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>
  <span class="token function" data-v-1d9d1214>useEffect</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token arrow operator" data-v-1d9d1214>=></span> <span class="token punctuation" data-v-1d9d1214>{</span>
    <span class="token dom variable" data-v-1d9d1214>document</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>title</span> <span class="token operator" data-v-1d9d1214>=</span> <span class="token template-string" data-v-1d9d1214><span class="token template-punctuation string" data-v-1d9d1214>`</span><span class="token string" data-v-1d9d1214>You clicked </span><span class="token interpolation" data-v-1d9d1214><span class="token interpolation-punctuation punctuation" data-v-1d9d1214>${</span>count<span class="token interpolation-punctuation punctuation" data-v-1d9d1214>}</span></span><span class="token string" data-v-1d9d1214> times</span><span class="token template-punctuation string" data-v-1d9d1214>`</span></span><span class="token punctuation" data-v-1d9d1214>;</span>
  <span class="token punctuation" data-v-1d9d1214>}</span><span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>

  <span class="token keyword" data-v-1d9d1214>const</span> <span class="token punctuation" data-v-1d9d1214>[</span>isOnline<span class="token punctuation" data-v-1d9d1214>,</span> setIsOnline<span class="token punctuation" data-v-1d9d1214>]</span> <span class="token operator" data-v-1d9d1214>=</span> <span class="token function" data-v-1d9d1214>useState</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token keyword null nil" data-v-1d9d1214>null</span><span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>
  <span class="token function" data-v-1d9d1214>useEffect</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token arrow operator" data-v-1d9d1214>=></span> <span class="token punctuation" data-v-1d9d1214>{</span>
    <span class="token keyword" data-v-1d9d1214>function</span> <span class="token function" data-v-1d9d1214>handleStatusChange</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token parameter" data-v-1d9d1214>status</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token punctuation" data-v-1d9d1214>{</span>
      <span class="token function" data-v-1d9d1214>setIsOnline</span><span class="token punctuation" data-v-1d9d1214>(</span>status<span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>isOnline</span><span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>
    <span class="token punctuation" data-v-1d9d1214>}</span>

    <span class="token maybe-class-name" data-v-1d9d1214>ChatAPI</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>subscribeToFriendStatus</span><span class="token punctuation" data-v-1d9d1214>(</span>props<span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>friend</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>id</span><span class="token punctuation" data-v-1d9d1214>,</span> handleStatusChange<span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>
    <span class="token keyword control-flow" data-v-1d9d1214>return</span> <span class="token punctuation" data-v-1d9d1214>(</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token arrow operator" data-v-1d9d1214>=></span> <span class="token punctuation" data-v-1d9d1214>{</span>
      <span class="token maybe-class-name" data-v-1d9d1214>ChatAPI</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>unsubscribeFromFriendStatus</span><span class="token punctuation" data-v-1d9d1214>(</span>props<span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>friend</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>id</span><span class="token punctuation" data-v-1d9d1214>,</span> handleStatusChange<span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>
    <span class="token punctuation" data-v-1d9d1214>}</span><span class="token punctuation" data-v-1d9d1214>;</span>
  <span class="token punctuation" data-v-1d9d1214>}</span><span class="token punctuation" data-v-1d9d1214>)</span>
<span class="token punctuation" data-v-1d9d1214>}</span>
</code></pre></div>
<p data-v-1d9d1214>Hook을 이용하면 생명주기 메서드에 따라서가 아니라 코드가 무엇을 하는지에 따라 나눌 수가 있습니다. 리액트는 컴포넌트에 사용된 모든 effect를 지정된 순서에 맞춰 적용합니다.</p>
<h3 id="effect가-업데이트-시마다-실행되는-이유" data-v-1d9d1214><a href="#effect%EA%B0%80-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%EC%8B%9C%EB%A7%88%EB%8B%A4-%EC%8B%A4%ED%96%89%EB%90%98%EB%8A%94-%EC%9D%B4%EC%9C%A0" aria-hidden="true" tabindex="-1" data-v-1d9d1214><span class="icon icon-link" data-v-1d9d1214></span></a>Effect가 업데이트 시마다 실행되는 이유</h3>
<p data-v-1d9d1214>class에 익숙하다면 왜 effect 정리(clean-up)가 마운트 해제되는 때에 한번만이 아니라 모든 리렌더링 시에 실행되는지가 궁금할 것입니다. 이러한 디자인이 버그가 적은 컴포넌트를 만드는데에 어떻게 도움이 되는지 다음의 예시를 통해 알아봅시다.</p>
<p data-v-1d9d1214>친구가 온라인인지 아닌지 표시하는 FriendStatus 컴포넌트 예시를 생각해봅시다. class는 this.props로부터 firend.id를 읽어내고 컴포넌트가 마운트된 이후에 친구의 상태를 구독하며 컴포넌트가 마운트를 해제할 때에 구독을 해지합니다.</p>
<div class="nuxt-content-highlight" data-v-1d9d1214><pre class="language-js line-numbers" data-v-1d9d1214><code data-v-1d9d1214><span class="token function" data-v-1d9d1214>componentDidMount</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token punctuation" data-v-1d9d1214>{</span>
  <span class="token maybe-class-name" data-v-1d9d1214>ChatAPI</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>subscribeToFriendStatus</span><span class="token punctuation" data-v-1d9d1214>(</span>
    <span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>props</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>friend</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>id</span><span class="token punctuation" data-v-1d9d1214>,</span>
    <span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>handleStatusChange</span>
  <span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>
<span class="token punctuation" data-v-1d9d1214>}</span>

<span class="token function" data-v-1d9d1214>componentWillUnmount</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token punctuation" data-v-1d9d1214>{</span>
  <span class="token maybe-class-name" data-v-1d9d1214>ChatAPI</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>unsubscribeFromFriendStatus</span><span class="token punctuation" data-v-1d9d1214>(</span>
    <span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>props</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>friend</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>id</span><span class="token punctuation" data-v-1d9d1214>,</span>
    <span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>handleStatusChange</span>
  <span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>
<span class="token punctuation" data-v-1d9d1214>}</span>
</code></pre></div>
<p data-v-1d9d1214>그런데 컴포넌트가 화면에 표시되어있는 동안 friend prop이 변한다면 무슨 일이 일어날까요? 컴포넌트는 다른 친구의 온라인 상태를 계속 표시할 것입니다. 버그인 거죠. 또한 마운트 해제가 일어날 동안에는 구독 해지 홏울이 다른 친구 ID를 사용하여 메모리 누수나 충돌이 발생할 수도 있습니다.</p>
<p data-v-1d9d1214>클래스 컴포넌트에서는 이런 경우들을 다루기 위해 componentDidUpdate를 사용합니다.</p>
<div class="nuxt-content-highlight" data-v-1d9d1214><pre class="language-js line-numbers" data-v-1d9d1214><code data-v-1d9d1214><span class="token function" data-v-1d9d1214>componentDidMount</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token punctuation" data-v-1d9d1214>{</span>
  <span class="token maybe-class-name" data-v-1d9d1214>ChatAPI</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>subscribeToFriendStatus</span><span class="token punctuation" data-v-1d9d1214>(</span>
    <span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>props</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>friend</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>id</span><span class="token punctuation" data-v-1d9d1214>,</span>
    <span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>handleStatusChange</span>
  <span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>
<span class="token punctuation" data-v-1d9d1214>}</span>

<span class="token function" data-v-1d9d1214>componentDidUpdate</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token parameter" data-v-1d9d1214>prevProps</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token punctuation" data-v-1d9d1214>{</span>
  <span class="token comment" data-v-1d9d1214>// 이전 friend.id에서 구독을 해지합니다.</span>
  <span class="token maybe-class-name" data-v-1d9d1214>ChatAPI</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>unsubscribeFromFriendStatus</span><span class="token punctuation" data-v-1d9d1214>(</span>
    prevProps<span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>friend</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>id</span><span class="token punctuation" data-v-1d9d1214>,</span>
    <span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>handleStatusChange</span>
  <span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>
  <span class="token comment" data-v-1d9d1214>// 다음 friend.id를 구독합니다.</span>
  <span class="token maybe-class-name" data-v-1d9d1214>ChatAPI</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>subscribeToFriendStatus</span><span class="token punctuation" data-v-1d9d1214>(</span>
    <span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>props</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>friend</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>id</span><span class="token punctuation" data-v-1d9d1214>,</span>
    <span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>handleStatusChange</span>
  <span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>
<span class="token punctuation" data-v-1d9d1214>}</span>

<span class="token function" data-v-1d9d1214>componentWillUnmount</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token punctuation" data-v-1d9d1214>{</span>
  <span class="token maybe-class-name" data-v-1d9d1214>ChatAPI</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>unsubscribeFromFriendStatus</span><span class="token punctuation" data-v-1d9d1214>(</span>
    <span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>props</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>friend</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>id</span><span class="token punctuation" data-v-1d9d1214>,</span>
    <span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>handleStatusChange</span>
  <span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>
<span class="token punctuation" data-v-1d9d1214>}</span>
</code></pre></div>
<p data-v-1d9d1214>리액트 애플리케이션의 흔한 버그 중의 하나가 componentDidUpdate를 제대로 다루지 않는 것입니다.</p>
<p data-v-1d9d1214>이번에는 Hook을 사용하는 컴포넌트를 생각해봅시다.</p>
<div class="nuxt-content-highlight" data-v-1d9d1214><pre class="language-js line-numbers" data-v-1d9d1214><code data-v-1d9d1214><span class="token keyword" data-v-1d9d1214>function</span> <span class="token function" data-v-1d9d1214><span class="token maybe-class-name" data-v-1d9d1214>FriendStatus</span></span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token parameter" data-v-1d9d1214>props</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token punctuation" data-v-1d9d1214>{</span>
  <span class="token comment" data-v-1d9d1214>// ...</span>
  <span class="token function" data-v-1d9d1214>useEffect</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token arrow operator" data-v-1d9d1214>=></span> <span class="token punctuation" data-v-1d9d1214>{</span>
    <span class="token comment" data-v-1d9d1214>// ...</span>
    <span class="token maybe-class-name" data-v-1d9d1214>ChatAPI</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>subscribeToFriendStatus</span><span class="token punctuation" data-v-1d9d1214>(</span>props<span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>friend</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>id</span><span class="token punctuation" data-v-1d9d1214>,</span> handleStatusChange<span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>
    <span class="token keyword control-flow" data-v-1d9d1214>return</span> <span class="token punctuation" data-v-1d9d1214>(</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token arrow operator" data-v-1d9d1214>=></span> <span class="token punctuation" data-v-1d9d1214>{</span>
      <span class="token maybe-class-name" data-v-1d9d1214>ChatAPI</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>unsubscribeFromFriendStatus</span><span class="token punctuation" data-v-1d9d1214>(</span>props<span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>friend</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>id</span><span class="token punctuation" data-v-1d9d1214>,</span> handleStatusChange<span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>
    <span class="token punctuation" data-v-1d9d1214>}</span><span class="token punctuation" data-v-1d9d1214>;</span>
  <span class="token punctuation" data-v-1d9d1214>}</span><span class="token punctuation" data-v-1d9d1214>)</span>
<span class="token punctuation" data-v-1d9d1214>}</span>
</code></pre></div>
<p data-v-1d9d1214>useEffect가 기본적으로 업데이트를 다루기 때문에 더는 업데이트를 위한 특별한 코드가 필요없습니다. 다음의 effect를 적용하기 전에 이전의 effect는 정리(clean-up)합니다. 구독과 구독 해지 호출을 반복해서 만들어내는 컴포넌트를 통해 이를 가시화해봅시다.</p>
<div class="nuxt-content-highlight" data-v-1d9d1214><pre class="language-js line-numbers" data-v-1d9d1214><code data-v-1d9d1214><span class="token comment" data-v-1d9d1214>// { friend: { id: 100 } } state을 사용하여 마운트합니다.</span>
<span class="token maybe-class-name" data-v-1d9d1214>ChatAPI</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>subscribeToFriendStatus</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token number" data-v-1d9d1214>100</span><span class="token punctuation" data-v-1d9d1214>,</span> handleStatusChange<span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>     <span class="token comment" data-v-1d9d1214>// 첫번째 effect가 작동합니다.</span>

<span class="token comment" data-v-1d9d1214>// { friend: { id: 200 } } state로 업데이트합니다.</span>
<span class="token maybe-class-name" data-v-1d9d1214>ChatAPI</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>unsubscribeFromFriendStatus</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token number" data-v-1d9d1214>100</span><span class="token punctuation" data-v-1d9d1214>,</span> handleStatusChange<span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span> <span class="token comment" data-v-1d9d1214>// 이전의 effect를 정리(clean-up)합니다.</span>
<span class="token maybe-class-name" data-v-1d9d1214>ChatAPI</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>subscribeToFriendStatus</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token number" data-v-1d9d1214>200</span><span class="token punctuation" data-v-1d9d1214>,</span> handleStatusChange<span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>     <span class="token comment" data-v-1d9d1214>// 다음 effect가 작동합니다.</span>

<span class="token comment" data-v-1d9d1214>// { friend: { id: 300 } } state로 업데이트합니다.</span>
<span class="token maybe-class-name" data-v-1d9d1214>ChatAPI</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>unsubscribeFromFriendStatus</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token number" data-v-1d9d1214>200</span><span class="token punctuation" data-v-1d9d1214>,</span> handleStatusChange<span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span> <span class="token comment" data-v-1d9d1214>// 이전의 effect를 정리(clean-up)합니다.</span>
<span class="token maybe-class-name" data-v-1d9d1214>ChatAPI</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>subscribeToFriendStatus</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token number" data-v-1d9d1214>300</span><span class="token punctuation" data-v-1d9d1214>,</span> handleStatusChange<span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>     <span class="token comment" data-v-1d9d1214>// 다음 effect가 작동합니다.</span>

<span class="token comment" data-v-1d9d1214>// 마운트를 해제합니다.</span>
<span class="token maybe-class-name" data-v-1d9d1214>ChatAPI</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>unsubscribeFromFriendStatus</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token number" data-v-1d9d1214>300</span><span class="token punctuation" data-v-1d9d1214>,</span> handleStatusChange<span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span> <span class="token comment" data-v-1d9d1214>// 마지막 effect를 정리(clean-up)합니다.</span>
</code></pre></div>
<p data-v-1d9d1214>이러한 방식으로 동작하는 것이 일관성을 유지해주며 클래스 컴포넌트에서는 흔히 업데이트 로직을 빼먹으면서 발생할 수 있는 버그를 예방합니다.</p>
<h3 id="effect를-건너뛰어-성능-최적화하기" data-v-1d9d1214><a href="#effect%EB%A5%BC-%EA%B1%B4%EB%84%88%EB%9B%B0%EC%96%B4-%EC%84%B1%EB%8A%A5-%EC%B5%9C%EC%A0%81%ED%99%94%ED%95%98%EA%B8%B0" aria-hidden="true" tabindex="-1" data-v-1d9d1214><span class="icon icon-link" data-v-1d9d1214></span></a>Effect를 건너뛰어 성능 최적화하기</h3>
<p data-v-1d9d1214>모든 렌더링 이후에 effect를 정리(clean-up)하거나 적용하는 것이 때때로 성능 저하를 발생시키는 경우도 있습니다. 클래스 컴포넌트의 경우에는 componentDidUpdate에서 prevProps나 prevState와의 비교를 통해 이러한 문제를 해결할 수 있습니다.</p>
<div class="nuxt-content-highlight" data-v-1d9d1214><pre class="language-js line-numbers" data-v-1d9d1214><code data-v-1d9d1214><span class="token function" data-v-1d9d1214>componentDidUpdate</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token parameter" data-v-1d9d1214>prevProps<span class="token punctuation" data-v-1d9d1214>,</span> prevState</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token punctuation" data-v-1d9d1214>{</span>
  <span class="token keyword control-flow" data-v-1d9d1214>if</span> <span class="token punctuation" data-v-1d9d1214>(</span>prevState<span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>count</span> <span class="token operator" data-v-1d9d1214>!==</span> <span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>state</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>count</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token punctuation" data-v-1d9d1214>{</span>
    <span class="token dom variable" data-v-1d9d1214>document</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>title</span> <span class="token operator" data-v-1d9d1214>=</span> <span class="token template-string" data-v-1d9d1214><span class="token template-punctuation string" data-v-1d9d1214>`</span><span class="token string" data-v-1d9d1214>You clicked </span><span class="token interpolation" data-v-1d9d1214><span class="token interpolation-punctuation punctuation" data-v-1d9d1214>${</span><span class="token keyword" data-v-1d9d1214>this</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>state</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>count</span><span class="token interpolation-punctuation punctuation" data-v-1d9d1214>}</span></span><span class="token string" data-v-1d9d1214> times</span><span class="token template-punctuation string" data-v-1d9d1214>`</span></span><span class="token punctuation" data-v-1d9d1214>;</span>
  <span class="token punctuation" data-v-1d9d1214>}</span>
<span class="token punctuation" data-v-1d9d1214>}</span>
</code></pre></div>
<p data-v-1d9d1214>이러한 요구 조건은 흔하기 때문에 useEffect Hook API에 이미 내재하여 있습니다. 특정 값들이 리렌더링 시에 변경되지 않는다면 리액트로 하여금 effect를 건너뛰도록할 수 있습니다. useEffect의 선택적 인수인 두 번째 인수로 배열을 넘기면 됩니다.</p>
<div class="nuxt-content-highlight" data-v-1d9d1214><pre class="language-js line-numbers" data-v-1d9d1214><code data-v-1d9d1214><span class="token function" data-v-1d9d1214>useEffect</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token arrow operator" data-v-1d9d1214>=></span> <span class="token punctuation" data-v-1d9d1214>{</span>
  <span class="token dom variable" data-v-1d9d1214>document</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>title</span> <span class="token operator" data-v-1d9d1214>=</span> <span class="token template-string" data-v-1d9d1214><span class="token template-punctuation string" data-v-1d9d1214>`</span><span class="token string" data-v-1d9d1214>You clicked </span><span class="token interpolation" data-v-1d9d1214><span class="token interpolation-punctuation punctuation" data-v-1d9d1214>${</span>count<span class="token interpolation-punctuation punctuation" data-v-1d9d1214>}</span></span><span class="token string" data-v-1d9d1214> times</span><span class="token template-punctuation string" data-v-1d9d1214>`</span></span><span class="token punctuation" data-v-1d9d1214>;</span>
<span class="token punctuation" data-v-1d9d1214>}</span><span class="token punctuation" data-v-1d9d1214>,</span> <span class="token punctuation" data-v-1d9d1214>[</span>count<span class="token punctuation" data-v-1d9d1214>]</span><span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span> <span class="token comment" data-v-1d9d1214>// count가 바뀔 때만 effect를 재실행합니다.</span>
</code></pre></div>
<p data-v-1d9d1214>위의 예시에서 우리는 [count] 를 두 번째 인수로 넘깁니다. 이것이 의미하는 바는 다음과 같습니다. 만약 count가 5이고 컴포넌트가 리렌더링된 이후에도 여전히 count는 변함없이 5라면 리액트는 이전 렌더링 시의 값 [5]를 그다음 렌더링 때의 [5]와 비교합니다. 배열 내의 모든 값이 같기 때문에 리액트는 effect를 건너뛰게 됩니다. 이런 식으로 최적화가 가능합니다.</p>
<p data-v-1d9d1214>count가 6으로 업데이트된 뒤에 렌더링하면 리액트는 이전에 렌더링된 값 [5]를 그다음 렌더링 시의 [6]과 비교합니다. 이때 리액트는 effect를 재실행합니다. 배열내의 여러 개의 값이 있다면 그중의 단 하나만 다를지라도 리액트는 effect를 재실행합니다.</p>
<p data-v-1d9d1214>이것은 정리(clean-up)를 사용하는 effect의 경우에도 동일하게 작용합니다.</p>
<div class="nuxt-content-highlight" data-v-1d9d1214><pre class="language-js line-numbers" data-v-1d9d1214><code data-v-1d9d1214><span class="token function" data-v-1d9d1214>useEffect</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token arrow operator" data-v-1d9d1214>=></span> <span class="token punctuation" data-v-1d9d1214>{</span>
  <span class="token keyword" data-v-1d9d1214>function</span> <span class="token function" data-v-1d9d1214>handleStatusChange</span><span class="token punctuation" data-v-1d9d1214>(</span><span class="token parameter" data-v-1d9d1214>status</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token punctuation" data-v-1d9d1214>{</span>
    <span class="token function" data-v-1d9d1214>setIsOnline</span><span class="token punctuation" data-v-1d9d1214>(</span>status<span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>isOnline</span><span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>
  <span class="token punctuation" data-v-1d9d1214>}</span>

  <span class="token maybe-class-name" data-v-1d9d1214>ChatAPI</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>subscribeToFriendStatus</span><span class="token punctuation" data-v-1d9d1214>(</span>props<span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>friend</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>id</span><span class="token punctuation" data-v-1d9d1214>,</span> handleStatusChange<span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>
  <span class="token keyword control-flow" data-v-1d9d1214>return</span> <span class="token punctuation" data-v-1d9d1214>(</span><span class="token punctuation" data-v-1d9d1214>)</span> <span class="token arrow operator" data-v-1d9d1214>=></span> <span class="token punctuation" data-v-1d9d1214>{</span>
    <span class="token maybe-class-name" data-v-1d9d1214>ChatAPI</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token method function property-access" data-v-1d9d1214>unsubscribeFromFriendStatus</span><span class="token punctuation" data-v-1d9d1214>(</span>props<span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>friend</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>id</span><span class="token punctuation" data-v-1d9d1214>,</span> handleStatusChange<span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>
  <span class="token punctuation" data-v-1d9d1214>}</span><span class="token punctuation" data-v-1d9d1214>;</span>
<span class="token punctuation" data-v-1d9d1214>}</span><span class="token punctuation" data-v-1d9d1214>,</span> <span class="token punctuation" data-v-1d9d1214>[</span>props<span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>friend</span><span class="token punctuation" data-v-1d9d1214>.</span><span class="token property-access" data-v-1d9d1214>id</span><span class="token punctuation" data-v-1d9d1214>]</span><span class="token punctuation" data-v-1d9d1214>)</span><span class="token punctuation" data-v-1d9d1214>;</span>
</code></pre></div>
<p data-v-1d9d1214>두 번째 인자는 빌드 시 변환에 의해 자동으로 추가될 수도 있습니다.</p>
<br data-v-1d9d1214>
<p data-v-1d9d1214>출처 : <a href="https://reactjs.org/docs/hooks-effect.html" rel="nofollow noopener noreferrer" target="_blank" data-v-1d9d1214>https://reactjs.org/docs/hooks-effect.html</a></p></div></section></div></div></div></div></div><script defer src="/_nuxt/static/1650435490/react/2021-05-01/state.js"></script><script src="/_nuxt/4dc5d53.js" defer></script><script src="/_nuxt/6c91a59.js" defer></script><script src="/_nuxt/b13de4e.js" defer></script><script src="/_nuxt/1f2442e.js" defer></script><script src="/_nuxt/66fd9d3.js" defer></script>
  </body>
</html>
